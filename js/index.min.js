/*!
 * Start Bootstrap - Grayscale v4.0.0-beta (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */
function login(){var e=$(".email")[0].value,a=$(".password")[0].value;firebase.auth().signInWithEmailAndPassword(e,a).then(function(){$(".waiverhead").removeClass("hide"),showForm(".waiverhead")}).catch(function(e){var a=e.message;e&&(console.log(e),alert(a))})}function loginAdmin(){var e=$(".email")[0].value,a=$(".password")[0].value;firebase.auth().signInWithEmailAndPassword(e,a).then(function(){"carnival@musonline.com"==firebase.auth().currentUser.email?(loadTable(),$(".table-container").removeClass("hide"),showForm(".table-container")):(alert("You are not authorized to see this page!"),window.location="https://muscarnival.github.io")}).catch(function(e){e.message;e&&(alert("You are not authorized to see this page!"),window.location="https://muscarnival.github.io")})}function loadTable(){firebase.database().ref("/participants/").once("value").then(function(e){var a=e.val();updateTable(a).map(function(e,a){$("#select-team-filter").append($("<option>",{text:e,value:a})),$("#select-new-team").append($("<option>",{text:e,value:a}))}),masterTable=a,curTable=a})}function updateTable(e,a){var t=Object.keys(e);a&&(t=t.filter(function(t){return e[t].Team==a}));var i=[];return t.map(function(a){var t=document.getElementById("participant-table"),n=e[a],r=t.insertRow(0),a=r.insertCell(0),o=r.insertCell(1),s=r.insertCell(2),l=r.insertCell(3);a.innerHTML=n.Name,o.innerHTML=n.Email,s.innerHTML=n.Team,i.includes(n.Team)||i.push(n.Team),""==n.Email&&(r.style="background-color: rgba(255, 0, 0, 0.3)"),l.innerHTML=!0===n.waiverComplete?"True":"False"}),i}function createParticipant(){var e=$("#select-new-team option:selected")[0].label,a=$(".new-name")[0].value,t=$(".new-email")[0].value,i=a.replace(" ",""),n={Name:a,Email:t,Team:e,waiverComplete:!1};firebase.auth().createUserWithEmailAndPassword(t,"hype2017").then(function(e){var a=e.uid;console.log(a),firebase.database().ref("/participants/"+i).remove().then(function(){firebase.database().ref("/participants/"+a).update(n).then(function(e){alert("User successfully added!")}).catch(function(e){alert("There was a problem adding the user!")})}).catch(function(){alert("There was a problem removing the old user!")})}).catch(function(e){e.code;var a=e.message;alert(a)})}function videoEnd(){$("#waiver-info").removeClass("hide"),$("#waiver").removeClass("hide"),showForm("#waiver-info")}function showForm(e){$("html, body").animate({scrollTop:$(e).offset().top},1e3,"easeInOutExpo")}function playVideo(){video.play()}function pauseVideo(){video.pause()}function progressBar(){curTime=video.currentTime,duration=video.duration,curProgress=Math.round(curTime/duration*100);var e=document.getElementById("myBar");e.style.width=curProgress+"%",e.innerHTML=curProgress+"%"}function submitWaiver(){var e=$(".name")[0].value,a=$(".address")[0].value,t=$(".telephone")[0].value,i=$(".birthday")[0].value,n=firebase.auth().currentUser.uid,r=new Date;""==e?alert("Please input your name!"):""==a?alert("Please input your address!"):""==t?alert("Please input your telephone!"):""==i&&alert("Please input your birthday!");var o={Name:e,address:a,telephone:t,birthday:i,waiverComplete:!0,timeCompleted:r.toLocaleDateString()};firebase.database().ref("/participants/"+n).update(o).then(function(e){$(".thank-you").removeClass("hide"),showForm(".thank-you")}).catch(function(e){alert("There was a problem submitting the waiver!")})}var config={apiKey:"AIzaSyB6W25napAR8VIksVpa_sgml4mkl_X5S_s",authDomain:"muscarnival-45dce.firebaseapp.com",databaseURL:"https://muscarnival-45dce.firebaseio.com",projectId:"muscarnival-45dce",storageBucket:"",messagingSenderId:"649034251506"};firebase.initializeApp(config);var database=firebase.database(),masterTable=[],curTable=[],video=document.getElementById("waiverVideo");!function(e){"use strict";e('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=e(this.hash);if((a=a.length?a:e("[name="+this.hash.slice(1)+"]")).length)return e("html, body").animate({scrollTop:a.offset().top-48},1e3,"easeInOutExpo"),!1}}),e(".js-scroll-trigger").click(function(){e(".navbar-collapse").collapse("hide")}),e("body").scrollspy({target:"#mainNav",offset:54}),"http://localhost:3000/"===window.location.href||"https://muscarnival.github.io/"===window.location.href?e(window).blur(pauseVideo):e("#select-team-filter").change(function(a){var t=e("#select-team-filter option:selected")[0].label;e("#participant-table").empty(),updateTable(masterTable,t)})}(jQuery);