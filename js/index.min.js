/*!
 * Start Bootstrap - Grayscale v4.0.0-beta (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */
var config={apiKey:"AIzaSyBkpevvEvMLKLIly5Z56DVRmu27J64lre8",authDomain:"hypeweek2018.firebaseapp.com",databaseURL:"https://hypeweek2018.firebaseio.com/",projectId:"hypeweek2018",storageBucket:"",messagingSenderId:"464667077494"};firebase.initializeApp(config);var database=firebase.database(),masterTable=[],curTable=[];function login(){var i=$(".email")[0].value,e=$(".password")[0].value;firebase.auth().signInWithEmailAndPassword(i,e).then(function(){$(".waiverhead").removeClass("hide"),showForm(".waiverhead"),firebase.database().ref("/hypeweek2018/").once("value").then(function(e){var t=e.val(),a=Object.keys(t),r=firebase.auth().currentUser.uid;a.map(function(e){if(t[e].Email==i&r!=e){var a=t[e];firebase.database().ref("/hypeweek2018/"+r).update(a),firebase.database().ref("/hypeweek2018/"+e).remove()}})})}).catch(function(e){var a=e.message;e&&(console.log(e),alert(a))})}function loginAdmin(){var e=$(".email")[0].value,a=$(".password")[0].value;firebase.auth().signInWithEmailAndPassword(e,a).then(function(){"carnival@musonline.com"==firebase.auth().currentUser.email?(loadTable(),$(".table-container").removeClass("hide"),showForm(".table-container")):(alert("You are not authorized to see this page!"),window.location="https://muscarnival.github.io")}).catch(function(e){e.message;e&&(alert("You are not authorized to see this page!"),window.location="https://muscarnival.github.io")})}function loadTable(){firebase.database().once("value").then(function(e){var a=e.val();updateTable(a).map(function(e,a){$("#select-team-filter").append($("<option>",{text:e,value:a})),$("#select-new-team").append($("<option>",{text:e,value:a}))}),curTable=masterTable=a})}function updateTable(s,a){var e=Object.keys(s);a&&(e=e.filter(function(e){return s[e].Team==a}));var l=[];return e.map(function(e){var a=document.getElementById("participant-table"),t=s[e],r=a.insertRow(0),i=(e=r.insertCell(0),r.insertCell(1)),n=r.insertCell(2),o=r.insertCell(3);e.innerHTML=t.Name,i.innerHTML=t.Email,n.innerHTML=t.Team,!l.includes(t.Team)&&l.push(t.Team),""==t.Email?r.style="background-color: rgba(255, 0, 0, 0.3)":1==t.waiverComplete&&(r.style="background-color: rgba(0, 255, 0, 0.3)"),o.innerHTML=!0===t.waiverComplete?"True":"False"}),l}function createParticipant(){var e=$("#select-new-team option:selected")[0].label,a=$(".new-name")[0].value,t=$(".new-email")[0].value,r=a.replace(" ",""),i={Name:a,Email:t,Team:e,waiverComplete:!1};firebase.auth().createUserWithEmailAndPassword(t,"hype2018").then(function(e){var a=e.uid;console.log(a),firebase.database().ref("/hypeweek2018/"+r).remove().then(function(){firebase.database().ref("/hypeweek2018/"+a).update(i).then(function(e){alert("User successfully added!")}).catch(function(e){alert("There was a problem adding the user!")})}).catch(function(){alert("There was a problem removing the old user!")})}).catch(function(e){e.code;var a=e.message;alert(a)})}var video=document.getElementById("waiverVideo");function videoEnd(){$("#waiver-info").removeClass("hide"),$("#waiver").removeClass("hide"),showForm("#waiver-info")}function showForm(e){$("html, body").animate({scrollTop:$(e).offset().top},1e3,"easeInOutExpo")}function playVideo(){video.play()}function pauseVideo(){video.pause()}function progressBar(){curTime=video.currentTime,duration=video.duration,curProgress=Math.round(curTime/duration*100);var e=document.getElementById("myBar");e.style.width=curProgress+"%",e.innerHTML=curProgress+"%"}function submitWaiver(){var e=$(".name")[0].value,a=$(".address")[0].value,t=$(".telephone")[0].value,r=$(".birthday")[0].value,i=firebase.auth().currentUser.uid,n=new Date;""==e?alert("Please input your name!"):""==a?alert("Please input your address!"):""==t?alert("Please input your telephone!"):""==r&&alert("Please input your birthday!");var o={Name:e,address:a,telephone:t,birthday:r,waiverComplete:!0,timeCompleted:n.toLocaleDateString()};firebase.database().ref("/hypeweek2018/"+i).update(o).then(function(e){$(".thank-you").removeClass("hide"),showForm(".thank-you")}).catch(function(e){alert("There was a problem submitting the waiver!")})}!function(t){"use strict";t('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=t(this.hash);if((e=e.length?e:t("[name="+this.hash.slice(1)+"]")).length)return t("html, body").animate({scrollTop:e.offset().top-48},1e3,"easeInOutExpo"),!1}}),t(".js-scroll-trigger").click(function(){t(".navbar-collapse").collapse("hide")}),t("body").scrollspy({target:"#mainNav",offset:54}),"http://localhost:3000/"===window.location.href||"https://muscarnival.github.io/"===window.location.href?t(window).blur(pauseVideo):t("#select-team-filter").change(function(e){var a=t("#select-team-filter option:selected")[0].label;t("#participant-table").empty(),updateTable(masterTable,a)})}(jQuery);